# docker build -f Dockerfile.inkscape.firefox -t accetto/xubuntu-vnc-inkscape-firefox .
# docker build -f Dockerfile.inkscape.firefox --build-arg BASETAG=dev -t accetto/xubuntu-vnc-inkscape-firefox:dev .
# docker build -f Dockerfile.inkscape.firefox --build-arg BASETAG=lab -t accetto/xubuntu-vnc-inkscape-firefox:lab .
# docker build -f Dockerfile.inkscape.firefox --build-arg BASETAG=devlab -t accetto/xubuntu-vnc-inkscape-firefox:devlab .

ARG BASETAG=latest

FROM accetto/xubuntu-vnc-firefox:${BASETAG} as stage-inkscape

### Switch to root user before install
USER 0

### 'apt-get clean' runs automatically
RUN apt-get update && apt-get install -y \
        inkscape \
    && rm -rf /var/lib/apt/lists/*

### Preconfigure Xfce desktop
COPY [ "./src/home/Desktop", "./Desktop/" ]

### Fix new launchers permissions
RUN /dockerstartup/set_user_permissions.sh $HOME

FROM stage-inkscape as stage-final

ENV REFRESHED_AT 2019-06-20

### Switch to default application user (non-root)
USER 1001
